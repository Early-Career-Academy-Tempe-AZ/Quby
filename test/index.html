<!DOCTYPE html>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Quby Test Rig</title>
<link rel="stylesheet" href="/style.css" />

<div id="controls">
    <input class="controls-button button-parse" type="button" value="Parse" onclick="parseCode();" />
    <input class="controls-button button-run" type="button" value="Run" onclick="runCode();" />

    <form method="post" action="." onsubmit="return false;">
        <div class="controls-options">
            <label>include core.qb</label>
            <input id="checkbox_include" type="checkbox" value="include" onclick="switchIncludeCore();" />

            <br />
            <label>debug mode</label>
            <input id="checkbox_debug" type="checkbox" value="include" onclick="switchDebugMode();" />
            
            <br />
            <label>parse as admin</label>
            <input id="checkbox_is_admin" type="checkbox" value="is_admin" onclick="switchIsAdmin();" />
        </div>
    </form>

    <div class="controls-time-info"></div>
</div>

<div class="left">
    <div class="code-top">
        <h2 class="code-title">in Quby</h2>

        <div class="code-files">
            <!-- this gets populated at the end of the page by JS -->
            <select class="js-code-files"></select>
        </div>
    </div>

    <div class="code-wrap">
        <div class="line-numbers js-line-numbers"></div>
        <textarea spellcheck="false" class="code-box" id="js-source-code" name="sourceCode"></textarea>
    </div>
</div>

<div class="right">
    <div class="code-top">
        <h2>out JavaScript</h2>
    </div>

    <div class="code-wrap">
        <textarea spellcheck="false" class="code-box" id="js-output-code" name="outputCode"></textarea>
        <div class="line-numbers js-line-numbers"></div>
    </div>
</div>

<div class="left_70">
    <h2>compilation errors</h2>
    <textarea class="output-error" id="js-output-error" name="outputError"></textarea>
</div>
<div class="right_30">
    <h2>symbols</h2>
    <textarea spellcheck="false" class="output-symbols" id="js-output-symbols" name="outputSymbols"></textarea>
</div>

<div class="footer">
    Quby copyright PlayMyCode 2014
</div>

<script src="script.js"></script>

<script>
    // pulls a compiled version from somewhere
    if ( true ) {
        addScripts( '.', 'compile' );

    // builds within the browser using typescript
    } else {
        // this never worked, TS seemed to just crash. I think it's an old version.
        // this also will not work with the new ajaxy loading of scripts.

        /*
        addScripts('./..', ['quby.ts'], 'text/typescript');
        addScripts('.', [
                'typescript.js',
                'typescript.compile.js'
        ]);
        */
    }

    addQubyFiles({
            'test'       : 'qb/test.qb',
            'Space Snake': 'qb/space-snake.qb',
            ' ... blank ... ': ''
    });

    scriptLoad( function() {
        setTimeout(function() {
            if ( window.quby ) {
                window.parseCode();
            }
        }, 0);
    } );
</script>

